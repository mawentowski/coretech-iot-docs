
<div class="title-box">
    <h1 class="topic-title">Close Gate</h1>
    <div class="action-statement">
        Disconnect from the gate device and end the boarding process
    </div>
</div>



<p>
    Send a <span class="method post">POST</span><code class="inline-code">/gateaccess/v2/closegate</code> request to
    end the boarding process. For a Multi-Technology Reader, this triggers the gate
    to close. For Magstripe Readers, this indicates the boarding process has
    ended and the attendant scanning boarding passes will no longer do so unless the
    boarding process is initiated over again (
    <code class="inline-code">/gateaccess/v2/opengate</code>).
</p>





<h2>Make an API Call</h2>

<div class="alert-section info-alert">
    <div class="">
        For information on the common components that make up a request, like the Resource URL, Header Parameters, or the Authorization Header, see <a href="/gateAccess/gateAccess-api-call-components">API Call Components</a>.

    </div>
</div>



<div class="code-section with-tabs">
    <div class="code-section-header">
        <div class="code-tabs">
            <button class="tablinks" onclick="openTab(event, 'bash-close-gate')" id="defaultOpen">curl</button>
            <button class="tablinks" onclick="openTab(event, 'Ruby-close-gate')">Ruby</button>
            <button class="tablinks" onclick="openTab(event, 'Python-close-gate')">Python</button>
            <button class="tablinks" onclick="openTab(event, 'PHP-close-gate')">PHP</button>
            <button class="tablinks" onclick="openTab(event, 'Java-close-gate')">Java</button>
            <button class="tablinks" onclick="openTab(event, 'Node-close-gate')">Node</button>
            <button class="tablinks" onclick="openTab(event, 'Go-close-gate')">Go</button>
            <button class="tablinks" onclick="openTab(event, '.NET-close-gate')">.NET</button>
        </div>
        <div class="copy-code-btn-container">
            <button class="copy-code-btn">
                <svg
                viewBox="0 0 1000 1000"
                height="20"
                width="20"
                xmlns="http://www.w3.org/2000/svg"
                role="img"
              >
                <title>Copy to Clipboard</title>
                <path d="M704 896H64V320h640v192h64V192c0-35-29-64-64-64H512C512 57 455 0 384 0S256 57 256 128H64c-35 0-64 29-64 64v704c0 35 29 64 64 64h640c35 0 64-29 64-64V768h-64v128zM192 192h64s64-29 64-64 29-64 64-64 64 29 64 64 32 64 64 64h64s64 29 64 64H128c0-39 28-64 64-64zm-64 512h128v-64H128v64zm448-128V448L320 640l256 192V704h320V576H576zM128 832h192v-64H128v64zm320-448H128v64h320v-64zM256 512H128v64h128v-64z"
                />
              </svg>
              
            </button>
        </div>

    </div>
    <div class="copied-popup hidden">
        Copied!
    </div>

<div id="bash-close-gate" class="tabcontent dark"><pre> <code>
curl --location -g --request POST 'https://{{baseurl}}/gateaccess/v2/closegate' \
--header 'location-id: {{locationId}}' \
--header 'Content-Type: application/json' \
--data-raw '{
    "connectionId": "{{msr_connection_id}}",
    "correlationId": "postman-ftr-bf7503f8-d8f8-4a3f-9b95-30f3c4e47685"
}'
</code>
</pre>
</div>

<div id="Ruby-close-gate" class="tabcontent dark"><pre><code>
require "uri"
require "json"
require "net/http"

url = URI("https://{{baseurl}}/gateaccess/v2/closegate")

https = Net::HTTP.new(url.host, url.port)
https.use_ssl = true

request = Net::HTTP::Post.new(url)
request["location-id"] = "{{locationId}}"
request["Content-Type"] = "application/json"
request.body = JSON.dump({
    "connectionId": "{{msr_connection_id}}",
    "correlationId": "postman-ftr-eb7d0d31-5942-47ba-b6c4-87528f174a9d"
})

response = https.request(request)
puts response.read_body           
</code>
</pre>
</div>

<div id="Python-close-gate" class="tabcontent dark"><pre> <code>
import requests
import json

url = "https://{{baseurl}}/gateaccess/v2/closegate"

payload = json.dumps({
    "connectionId": "{{msr_connection_id}}",
    "correlationId": "postman-ftr-3a0504ad-15f2-4e97-9e3d-e74222accc28"
})
headers = {
    'location-id': '{{locationId}}',
    'Content-Type': 'application/json'
}

response = requests.request("POST", url, headers=headers, data=payload)

print(response.text)       
</code>
</pre>
</div>

<div id="PHP-close-gate" class="tabcontent dark"><pre> <code>
<?php

$curl = curl_init();

curl_setopt_array($curl, array(
    CURLOPT_URL => 'https://%7B%7Bbaseurl%7D%7D/gateaccess/v2/closegate',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_ENCODING => '',
    CURLOPT_MAXREDIRS => 10,
    CURLOPT_TIMEOUT => 0,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
    CURLOPT_CUSTOMREQUEST => 'POST',
    CURLOPT_POSTFIELDS =>'{
    "connectionId": "{{msr_connection_id}}",
    "correlationId": "postman-ftr-7952ff4e-4a25-4070-9bef-cfefed05dedf"
}',
    CURLOPT_HTTPHEADER => array(
    'location-id: {{locationId}}',
    'Content-Type: application/json'
    ),
));

$response = curl_exec($curl);

curl_close($curl);
echo $response;               
</code>
</pre>
</div>

<div id="Java-close-gate" class="tabcontent dark"><pre><code>
Unirest.setTimeouts(0, 0);
HttpResponse<String> response = Unirest.post("https://{{baseurl}}/gateaccess/v2/closegate")
    .header("location-id", "{{locationId}}")
    .header("Content-Type", "application/json")
    .body("{\r\n    \"connectionId\": \"{{msr_connection_id}}\",\r\n    \"correlationId\": \"postman-ftr-d1b83c2c-f6fb-4c7d-bf9e-8a6f1de9748c\"\r\n}")
    .asString();     
</code>
</pre>
</div>

<div id="Node-close-gate" class="tabcontent dark"><pre><code>
var request = require('request');
var options = {
    'method': 'POST',
    'url': 'https://{{baseurl}}/gateaccess/v2/closegate',
    'headers': {
    'location-id': '{{locationId}}',
    'Content-Type': 'application/json'
    },
    body: JSON.stringify({
    "connectionId": "{{msr_connection_id}}",
    "correlationId": "postman-ftr-b7e7d48b-588d-400b-9e0a-762afe19be6a"
    })

};
request(options, function (error, response) {
    if (error) throw new Error(error);
    console.log(response.body);
});    
</code>
</pre>
</div>

<div id="Go-close-gate" class="tabcontent dark"><pre><code>
package main

import (
    "fmt"
    "strings"
    "net/http"
    "io/ioutil"
)

func main() {

    url := "https://%7B%7Bbaseurl%7D%7D/gateaccess/v2/closegate"
    method := "POST"

    payload := strings.NewReader(`{`+"
"+`
    "connectionId": "{{msr_connection_id}}",`+"
"+`
    "correlationId": "postman-ftr-99ffafb1-09d4-487e-b452-fe4e6cd7a074"`+"
"+`
}`)

    client := &http.Client {
    }
    req, err := http.NewRequest(method, url, payload)

    if err != nil {
    fmt.Println(err)
    return
    }
    req.Header.Add("location-id", "{{locationId}}")
    req.Header.Add("Content-Type", "application/json")

    res, err := client.Do(req)
    if err != nil {
    fmt.Println(err)
    return
    }
    defer res.Body.Close()

    body, err := ioutil.ReadAll(res.Body)
    if err != nil {
    fmt.Println(err)
    return
    }
    fmt.Println(string(body))
}
</code>
</pre>
</div>

<div id=".NET-close-gate" class="tabcontent dark"><pre><code>
var client = new RestClient("https://{{baseurl}}/gateaccess/v2/closegate");
client.Timeout = -1;
var request = new RestRequest(Method.POST);
request.AddHeader("location-id", "{{locationId}}");
request.AddHeader("Content-Type", "application/json");
var body = @"{
" + "\n" +
@"    ""connectionId"": ""{{msr_connection_id}}"",
" + "\n" +
@"    ""correlationId"": ""postman-ftr-837d58df-e40c-47ae-8441-747813118a85""
" + "\n" +
@"}";
request.AddParameter("application/json", body,  ParameterType.RequestBody);
IRestResponse response = client.Execute(request);
Console.WriteLine(response.Content);
</code>
</pre>
</div>

</div>

<p class="caption">
    Sample <span class="method post">POST</span>
    gateaccess/v2/acceptconsumer</code> request that tells the API to end the boarding process.</p>




    

<h2>Request Body</h2>


<p>
    To successfully make the request, you must include the <code class="inline-code">connectionId</code> of the gate device.
</p>


<div class="method-example atom-one-light">
    <div class="method-example-top-bar">Request Body</div>
    <pre>
            <code class="language-json">
{
    "connectionId": "{{msr_connection_id}}",
    "correlationId": "postman-ftr-{{$guid}}"
}
        </code>
        </pre>
</div>




<h2>Response</h2>
<p>
    Upon making a
    <code class="inline-code">/gateaccess/v2/closegate</code>
    request, the GateAccess API acknowledges the request with a synchronous
    message, returning a
    <code class="inline-code">2xx</code> success status code (as seen in a tool
    like Postman).
</p>
<p>
    A <code class="inline-code">CloseGateResponse</code> message displays on the
    Service Bus simply indicating that the boarding process has ended, as
    indicated by the <code class="inline-code">IsSuccess</code> property set to
    <code class="inline-code">true</code>.
</p>

<div class="method-example atom-one-light">
    <div class="method-example-top-bar">Service Bus Message</div>
    <pre>
            <code class="language-json">
{
    "IsSuccess": true,
    "Error": null
}
        </code>
        </pre>
</div>

<p class="caption">
    <code class="inline-code">CloseGateResponse</code> Service Bus Message Body
    indicating the request to end the boarding process has succeeded
</p>




