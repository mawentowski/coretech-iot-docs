
<div class="title-box">
    <h1 class="topic-title">Close Access Point</h1>
    <div class="action-statement">
        unattach from the access device and end the access process
    </div>
</div>



<p>
    Send a <span class="method post">POST</span><code class="inline-code">/access/v2/closeaccesspoint</code> request to
    end the access process. For a Multi-Technology Reader, this triggers the access point barrier to close. For Magstripe Readers, this indicates the access process has
    ended and the attendant reading entry passes will no longer do so unless the
    access process is initiated over again (
    <code class="inline-code">/access/v2/openaccess</code>).
</p>





<h2>Make an API Call</h2>

<div class="alert-section info-alert">
    <div class="">
        For information on the common components that make up a request, like the Resource URL, Header Parameters, or the Authorization Header, see <a href="/access/access-api-call-components">API Call Components</a>.

    </div>
</div>



<div class="code-section with-tabs">
    <div class="code-section-header">
        <div class="code-tabs">
            <button class="tablinks" onclick="openTab(event, 'bash-close-access')" id="defaultOpen">curl</button>
            <button class="tablinks" onclick="openTab(event, 'Ruby-close-access')">Ruby</button>
            <button class="tablinks" onclick="openTab(event, 'Python-close-access')">Python</button>
            <button class="tablinks" onclick="openTab(event, 'PHP-close-access')">PHP</button>
            <button class="tablinks" onclick="openTab(event, 'Java-close-access')">Java</button>
            <button class="tablinks" onclick="openTab(event, 'Node-close-access')">Node</button>
            <button class="tablinks" onclick="openTab(event, 'Go-close-access')">Go</button>
            <button class="tablinks" onclick="openTab(event, '.NET-close-access')">.NET</button>
        </div>
        <div class="copy-code-btn-container">
            <button class="copy-code-btn">
                <svg
                viewBox="0 0 1000 1000"
                height="20"
                width="20"
                xmlns="http://www.w3.org/2000/svg"
                role="img"
              >
                <title>Copy to Clipboard</title>
                <path d="M704 896H64V320h640v192h64V192c0-35-29-64-64-64H512C512 57 455 0 384 0S256 57 256 128H64c-35 0-64 29-64 64v704c0 35 29 64 64 64h640c35 0 64-29 64-64V768h-64v128zM192 192h64s64-29 64-64 29-64 64-64 64 29 64 64 32 64 64 64h64s64 29 64 64H128c0-39 28-64 64-64zm-64 512h128v-64H128v64zm448-128V448L320 640l256 192V704h320V576H576zM128 832h192v-64H128v64zm320-448H128v64h320v-64zM256 512H128v64h128v-64z"
                />
              </svg>
              
            </button>
        </div>

    </div>
    <div class="copied-popup hidden">
        Copied!
    </div>

<div id="bash-close-access" class="tabcontent dark"><pre> <code>
curl --area -g --request POST 'https://{{baseurl}}/access/v2/closeaccesspoint' \
--header 'area-id: {{areaId}}' \
--header 'Content-Type: application/json' \
--data-raw '{
    "attachmentId": "{{msr_attachment_id}}",
    "relationId": "postman-ftr-bf7503f8-d8f8-4a3f-9b95-30f3c4e47685"
}'
</code>
</pre>
</div>

<div id="Ruby-close-access" class="tabcontent dark"><pre><code>
require "uri"
require "json"
require "net/http"

url = URI("https://{{baseurl}}/access/v2/closeaccesspoint")

https = Net::HTTP.new(url.host, url.port)
https.use_ssl = true

request = Net::HTTP::Post.new(url)
request["area-id"] = "{{areaId}}"
request["Content-Type"] = "application/json"
request.body = JSON.dump({
    "attachmentId": "{{msr_attachment_id}}",
    "relationId": "postman-ftr-eb7d0d31-5942-47ba-b6c4-87528f174a9d"
})

response = https.request(request)
puts response.read_body           
</code>
</pre>
</div>

<div id="Python-close-access" class="tabcontent dark"><pre> <code>
import requests
import json

url = "https://{{baseurl}}/access/v2/closeaccesspoint"

payload = json.dumps({
    "attachmentId": "{{msr_attachment_id}}",
    "relationId": "postman-ftr-3a0504ad-15f2-4e97-9e3d-e74222accc28"
})
headers = {
    'area-id': '{{areaId}}',
    'Content-Type': 'application/json'
}

response = requests.request("POST", url, headers=headers, data=payload)

print(response.text)       
</code>
</pre>
</div>

<div id="PHP-close-access" class="tabcontent dark"><pre> <code>
<?php

$curl = curl_init();

curl_setopt_array($curl, array(
    CURLOPT_URL => 'https://%7B%7Bbaseurl%7D%7D/access/v2/closeaccesspoint',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_ENCODING => '',
    CURLOPT_MAXREDIRS => 10,
    CURLOPT_TIMEOUT => 0,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
    CURLOPT_CUSTOMREQUEST => 'POST',
    CURLOPT_POSTFIELDS =>'{
    "attachmentId": "{{msr_attachment_id}}",
    "relationId": "postman-ftr-7952ff4e-4a25-4070-9bef-cfefed05dedf"
}',
    CURLOPT_HTTPHEADER => array(
    'area-id: {{areaId}}',
    'Content-Type: application/json'
    ),
));

$response = curl_exec($curl);

curl_close($curl);
echo $response;               
</code>
</pre>
</div>

<div id="Java-close-access" class="tabcontent dark"><pre><code>
Unirest.setTimeouts(0, 0);
HttpResponse<String> response = Unirest.post("https://{{baseurl}}/access/v2/closeaccesspoint")
    .header("area-id", "{{areaId}}")
    .header("Content-Type", "application/json")
    .body("{\r\n    \"attachmentId\": \"{{msr_attachment_id}}\",\r\n    \"relationId\": \"postman-ftr-d1b83c2c-f6fb-4c7d-bf9e-8a6f1de9748c\"\r\n}")
    .asString();     
</code>
</pre>
</div>

<div id="Node-close-access" class="tabcontent dark"><pre><code>
var request = require('request');
var options = {
    'method': 'POST',
    'url': 'https://{{baseurl}}/access/v2/closeaccesspoint',
    'headers': {
    'area-id': '{{areaId}}',
    'Content-Type': 'application/json'
    },
    body: JSON.stringify({
    "attachmentId": "{{msr_attachment_id}}",
    "relationId": "postman-ftr-b7e7d48b-588d-400b-9e0a-762afe19be6a"
    })

};
request(options, function (error, response) {
    if (error) throw new Error(error);
    console.log(response.body);
});    
</code>
</pre>
</div>

<div id="Go-close-access" class="tabcontent dark"><pre><code>
package main

import (
    "fmt"
    "strings"
    "net/http"
    "io/ioutil"
)

func main() {

    url := "https://%7B%7Bbaseurl%7D%7D/access/v2/closeaccesspoint"
    method := "POST"

    payload := strings.NewReader(`{`+"
"+`
    "attachmentId": "{{msr_attachment_id}}",`+"
"+`
    "relationId": "postman-ftr-99ffafb1-09d4-487e-b452-fe4e6cd7a074"`+"
"+`
}`)

    client := &http.Client {
    }
    req, err := http.NewRequest(method, url, payload)

    if err != nil {
    fmt.Println(err)
    return
    }
    req.Header.Add("area-id", "{{areaId}}")
    req.Header.Add("Content-Type", "application/json")

    res, err := client.Do(req)
    if err != nil {
    fmt.Println(err)
    return
    }
    defer res.Body.Close()

    body, err := ioutil.ReadAll(res.Body)
    if err != nil {
    fmt.Println(err)
    return
    }
    fmt.Println(string(body))
}
</code>
</pre>
</div>

<div id=".NET-close-access" class="tabcontent dark"><pre><code>
var client = new RestClient("https://{{baseurl}}/access/v2/closeaccesspoint");
client.Timeout = -1;
var request = new RestRequest(Method.POST);
request.AddHeader("area-id", "{{areaId}}");
request.AddHeader("Content-Type", "application/json");
var body = @"{
" + "\n" +
@"    ""attachmentId"": ""{{msr_attachment_id}}"",
" + "\n" +
@"    ""relationId"": ""postman-ftr-837d58df-e40c-47ae-8441-747813118a85""
" + "\n" +
@"}";
request.AddParameter("application/json", body,  ParameterType.RequestBody);
IRestResponse response = client.Execute(request);
Console.WriteLine(response.Content);
</code>
</pre>
</div>

</div>

<p class="caption">
    Sample <span class="method post">POST</span>
    access/v2/acceptconsumer</code> request that tells the API to end the access process.</p>




    

<h2>Request Body</h2>


<p>
    To successfully make the request, you must include the <code class="inline-code">attachmentId</code> of the access device.
</p>


<div class="method-example atom-one-light">
    <div class="method-example-top-bar">Request Body</div>
    <pre>
            <code class="language-json">
{
    "attachmentId": "{{msr_attachment_id}}",
    "relationId": "postman-ftr-{{$guid}}"
}
        </code>
        </pre>
</div>




<h2>Response</h2>
<p>
    Upon making a
    <code class="inline-code">/access/v2/closeaccesspoint</code>
    request, the Access API acknowledges the request with a synchronous
    message, returning a
    <code class="inline-code">2xx</code> success status code (as seen in a tool
    like Postman).
</p>
<p>
    A <code class="inline-code">CloseAccessPointResponse</code> message displays on the
    IoT Message Service simply indicating that the access process has ended, as
    indicated by the <code class="inline-code">IsSuccess</code> property set to
    <code class="inline-code">true</code>.
</p>

<div class="method-example atom-one-light">
    <div class="method-example-top-bar">Message</div>
    <pre>
            <code class="language-json">
{
    "IsSuccess": true,
    "Error": null
}
        </code>
        </pre>
</div>

<p class="caption">
    <code class="inline-code">CloseAccessPointResponse</code> Message Body
    indicating the request to end the access process has succeeded
</p>




