<div class="title-box">
    <h1 class="topic-title">Get an Access Token</h1>
    <div class="action-statement">
        Exchange your credentials for an access token
    </div>
</div>

<p>
    Send a <strong>Get Access Token</strong> request to retrieve an <code class="inline-code">access token</code>
    that authorizes your API calls. This token is returned in the JSON response
    as an <code class="inline-code">access_token</code> but should be included
    in Authorization Headers of future requests made during this session as
    <code class="inline-code">bearer_token</code>.
</p>

<h2>Make an API Call</h2>

<p>
    To successfully make the request, you must include your credentials in the
    Request Body.
</p>

<div class="alert-section info-alert">
    <div class="">
        In the Request Body, notice your credential values are represented by
        Postman variables. For example,
        <code class="inline-code">{{clientid}}</code>. The Postman variables used
        are defined Postman environment file.
    </div>
</div>
<div class="code-section with-tabs">
    <div class="code-section-header">
        <div class="code-tabs">
            <button class="tablinks" onclick="openTab(event, 'bash-get-access-token')" id="defaultOpen">curl</button>
            <button class="tablinks" onclick="openTab(event, 'Ruby-get-access-token')">Ruby</button>
            <button class="tablinks" onclick="openTab(event, 'Python-get-access-token')">Python</button>
            <button class="tablinks" onclick="openTab(event, 'PHP-get-access-token')">PHP</button>
            <button class="tablinks" onclick="openTab(event, 'Java-get-access-token')">Java</button>
            <button class="tablinks" onclick="openTab(event, 'Node-get-access-token')">Node</button>
            <button class="tablinks" onclick="openTab(event, 'Go-get-access-token')">Go</button>
            <button class="tablinks" onclick="openTab(event, '.NET-get-access-token')">.NET</button>
        </div>
        <div class="copy-code-btn-container">
            <button class="copy-code-btn">
                <svg
                viewBox="0 0 1000 1000"
                height="20"
                width="20"
                xmlns="http://www.w3.org/2000/svg"
                role="img"
              >
                <title>Copy to Clipboard</title>
                <path d="M704 896H64V320h640v192h64V192c0-35-29-64-64-64H512C512 57 455 0 384 0S256 57 256 128H64c-35 0-64 29-64 64v704c0 35 29 64 64 64h640c35 0 64-29 64-64V768h-64v128zM192 192h64s64-29 64-64 29-64 64-64 64 29 64 64 32 64 64 64h64s64 29 64 64H128c0-39 28-64 64-64zm-64 512h128v-64H128v64zm448-128V448L320 640l256 192V704h320V576H576zM128 832h192v-64H128v64zm320-448H128v64h320v-64zM256 512H128v64h128v-64z"
                />
              </svg>
              
            </button>
        </div>

    </div>
    <div class="copied-popup">
        Copied!
    </div>

<div id="bash-get-access-token" class="tabcontent dark"><pre> <code>
curl --location -g --request POST 'https://login.microsoftonline.com/{{AAD_tenent}}.onmicrosoft.com/oauth2/token' \
--header 'Content-Type: application/x-www-form-urlencoded' \
--data-urlencode 'grant_type=client_credentials' \
--data-urlencode 'client_id={{clientid}}' \
--data-urlencode 'client_secret={{clientsecret}}' \
--data-urlencode 'resource={{resourceid}}'
</code>
</pre>
</div>

<div id="Ruby-get-access-token" class="tabcontent dark"><pre><code>
require "uri"
require "net/http"

url = URI("https://login.microsoftonline.com/{{AAD_tenent}}.onmicrosoft.com/oauth2/token")

https = Net::HTTP.new(url.host, url.port)
https.use_ssl = true

request = Net::HTTP::Post.new(url)
request["Content-Type"] = "application/x-www-form-urlencoded"
request.body = "grant_type=client_credentials&client_id=%7B%7Bclientid%7D%7D&client_secret=%7B%7Bclientsecret%7D%7D&resource=%7B%7Bresourceid%7D%7D"

response = https.request(request)
puts response.read_body
</code>
</pre>
</div>

<div id="Python-get-access-token" class="tabcontent dark"><pre> <code>
import requests

url = "https://login.microsoftonline.com/{{AAD_tenent}}.onmicrosoft.com/oauth2/token"

payload='grant_type=client_credentials&client_id=%7B%7Bclientid%7D%7D&client_secret=%7B%7Bclientsecret%7D%7D&resource=%7B%7Bresourceid%7D%7D'
headers = {
    'Content-Type': 'application/x-www-form-urlencoded'
}

response = requests.request("POST", url, headers=headers, data=payload)

print(response.text)
</code>
</pre>
</div>

<div id="PHP-get-access-token" class="tabcontent dark"><pre> <code>
<?php

$curl = curl_init();

curl_setopt_array($curl, array(
    CURLOPT_URL => 'https://login.microsoftonline.com/%7B%7BAAD_tenent%7D%7D.onmicrosoft.com/oauth2/token',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_ENCODING => '',
    CURLOPT_MAXREDIRS => 10,
    CURLOPT_TIMEOUT => 0,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
    CURLOPT_CUSTOMREQUEST => 'POST',
    CURLOPT_POSTFIELDS => 'grant_type=client_credentials&client_id=%7B%7Bclientid%7D%7D&client_secret=%7B%7Bclientsecret%7D%7D&resource=%7B%7Bresourceid%7D%7D',
    CURLOPT_HTTPHEADER => array(
    'Content-Type: application/x-www-form-urlencoded'
    ),
));

$response = curl_exec($curl);

curl_close($curl);
echo $response;
    
</code>
</pre>
</div>

<div id="Java-get-access-token" class="tabcontent dark"><pre><code>
Unirest.setTimeouts(0, 0);
HttpResponse<String> response = Unirest.post("https://login.microsoftonline.com/{{AAD_tenent}}.onmicrosoft.com/oauth2/token")
    .header("Content-Type", "application/x-www-form-urlencoded")
    .field("grant_type", "client_credentials")
    .field("client_id", "{{clientid}}")
    .field("client_secret", "{{clientsecret}}")
    .field("resource", "{{resourceid}}")
    .asString();    
</code>
</pre>
</div>

<div id="Node-get-access-token" class="tabcontent dark"><pre><code>
var request = require('request');
var options = {
    'method': 'POST',
    'url': 'https://login.microsoftonline.com/{{AAD_tenent}}.onmicrosoft.com/oauth2/token',
    'headers': {
    'Content-Type': 'application/x-www-form-urlencoded'
    },
    form: {
    'grant_type': 'client_credentials',
    'client_id': '{{clientid}}',
    'client_secret': '{{clientsecret}}',
    'resource': '{{resourceid}}'
    }
};
request(options, function (error, response) {
    if (error) throw new Error(error);
    console.log(response.body);
});
</code>
</pre>
</div>

<div id="Go-get-access-token" class="tabcontent dark"><pre><code>
// Set your secret key. Remember to switch to your live secret key in production.
// See your keys here: https://dashboard.stripe.com/apikeys
stripe.Key = "sk_test_4eC39HqLyjWDarjtT1zdp7dc"

subscription, err := sub.Get("sub_49ty4767H20z6a", nil)
params := &stripe.SubscriptionParams{
CancelAtPeriodEnd: stripe.Bool(false),
ProrationBehavior: stripe.String(string(stripe.SubscriptionProrationBehaviorCreateProrations)),
Items: []*stripe.SubscriptionItemsParams{
{
ID: stripe.String(subscription.Items.Values[0].ID),
Price: stripe.String("price_CBb6IXqvTLXp3f"),
},
},
}
subscription, err = sub.Update("sub_49ty4767H20z6a", params)
</code>
</pre>
</div>

<div id=".NET-get-access-token" class="tabcontent dark"><pre><code>
var client = new RestClient("https://login.microsoftonline.com/{{AAD_tenent}}.onmicrosoft.com/oauth2/token");
client.Timeout = -1;
var request = new RestRequest(Method.POST);
request.AddHeader("Content-Type", "application/x-www-form-urlencoded");
request.AddParameter("grant_type", "client_credentials");
request.AddParameter("client_id", "{{clientid}}");
request.AddParameter("client_secret", "{{clientsecret}}");
request.AddParameter("resource", "{{resourceid}}");
IRestResponse response = client.Execute(request);
Console.WriteLine(response.Content);
</code>
</pre>
</div>


</div>
<p class="caption">Get Access Token request shown in multiple programming languages</p>






<h2 id="success-response">Response</h2>
<p>
    A successful request returns the
    <code class="inline-code">200 OK</code> status code with a JSON Response
    Body containing the <code class="inline-code">access_token</code>.
</p>

<div class="method-example atom-one-light">
    <div class="method-example-top-bar">Response</div>
    <pre>
    <code class="language-json">
{
    "token_type": "Bearer",
    "expires_in": "3599",
    "ext_expires_in": "3599",
    "expires_on": "1635954949",
    "not_before": "1635951049",
    "resource": "51583536-28c7-4ea6-8d94-d0a7e91cb1cb",
    "access_token": "eyJ0eXAiOiJKV1QiLsf1V6TJUs1P3601"
}
</code>
</pre>
</div>

<p class="caption">
    Response Body containing the <code class="inline-code">access_token</code>
</p>
<div class="alert-section tip-alert">
    <div class="">
        In Postman, if you check the <strong>Tests</strong> tab, you will notice
        there is Javascript code that saves the
        <code class="inline-code">access_token</code> value that was returned to
        the <code class="inline-code">{{bearer_token}}</code> variable defined
        in the Postman environment. Now, when future requests are made in this
        session, the <code class="inline-code">bearer_token</code> will be
        included in the Authorization Header without the need to manually enter
        it.
    </div>
</div>

<div class="alert-section warning-alert">
    <div class="">
        The bearer token expires. The current expiration time is set to 3599
        seconds as indicated in the example Response Body above. Ensure that you
        refresh this access token if continued access is required; otherwise,
        you will receive a
        <a href="401 Unauthorized_1.htm">401 Unauthorized</a> error. The token
        can be refreshed by requesting another access token
    </div>
</div>
<div class="continued-reading-section">
    <h2 class="continued-reading">Next Steps</h2>
    <ul class="continue-link-list">
        <div class="continue-link-row">
            <div class="svg-container">
                <svg
                    version="1.1"
                    id="Capa_1"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    x="0px"
                    y="0px"
                    viewBox="0 0 482.204 482.204"
                    style="enable-background: new 0 0 482.204 482.204"
                    xml:space="preserve"
                >
                    <g>
                        <path
                            style="fill: #5469d4"
                            d="M83.127,344.477c54.602,1.063,101.919,9.228,136.837,23.613c0.596,0.244,1.227,0.366,1.852,0.366
                    c0.95,0,1.895-0.279,2.706-0.822c1.349-0.902,2.158-2.418,2.158-4.041l0.019-261.017c0-1.992-1.215-3.783-3.066-4.519
                    L85.019,42.899c-1.496-0.596-3.193-0.411-4.527,0.494c-1.334,0.906-2.133,2.413-2.133,4.025v292.197
                    C78.359,342.264,80.479,344.425,83.127,344.477z"
                        />
                        <path
                            style="fill: #5469d4"
                            d="M480.244,89.256c-1.231-0.917-2.824-1.198-4.297-0.759l-49.025,14.657
                    c-2.06,0.616-3.471,2.51-3.471,4.659v252.151c0,0,0.218,3.978-3.97,3.978c-4.796,0-7.946,0-7.946,0
                    c-39.549,0-113.045,4.105-160.93,31.6l-9.504,5.442l-9.503-5.442c-47.886-27.494-121.381-31.6-160.93-31.6c0,0-8.099,0-10.142,0
                    c-1.891,0-1.775-2.272-1.775-2.271V107.813c0-2.149-1.411-4.043-3.47-4.659L6.256,88.497c-1.473-0.439-3.066-0.158-4.298,0.759
                    S0,91.619,0,93.155v305.069c0,1.372,0.581,2.681,1.597,3.604c1.017,0.921,2.375,1.372,3.741,1.236
                    c14.571-1.429,37.351-3.131,63.124-3.131c56.606,0,102.097,8.266,131.576,23.913c4.331,2.272,29.441,15.803,41.065,15.803
                    c11.624,0,36.733-13.53,41.063-15.803c29.48-15.647,74.971-23.913,131.577-23.913c25.771,0,48.553,1.702,63.123,3.131
                    c1.367,0.136,2.725-0.315,3.742-1.236c1.016-0.923,1.596-2.231,1.596-3.604V93.155C482.203,91.619,481.476,90.173,480.244,89.256z
                    "
                        />
                        <path
                            style="fill: #5469d4"
                            d="M257.679,367.634c0.812,0.543,1.757,0.822,2.706,0.822c0.626,0,1.256-0.122,1.853-0.366
                    c34.917-14.386,82.235-22.551,136.837-23.613c2.648-0.052,4.769-2.213,4.769-4.861V47.418c0-1.613-0.799-3.12-2.133-4.025
                    c-1.334-0.904-3.031-1.09-4.528-0.494L258.569,98.057c-1.851,0.736-3.065,2.527-3.065,4.519l0.019,261.017
                    C255.521,365.216,256.331,366.732,257.679,367.634z"
                        />
                    </g>
                </svg>
            </div>
            <div>
                <a href="/get-started/get-started/API-requests"
                    >API Requests</a
                >
            </div>
        </div>
    </ul>
</div>